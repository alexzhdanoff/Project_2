1. Цель исследования

Построить ML-модель, которая: 
- прогнозирует вероятность покупки покупателем в течение ближайших 90 дней

Метрика качества модели:
- ROC-AUC 


2. Исходные данные

1) датасет №1 - apparel-purchases (содержит историю покупок клиентов)
- client_id - идентификатор пользователя
- quantity - количество товаров в заказе
- price - цена товара
- category_ids - вложенные категории, к которым отнсится товар
- date - дата покупки
- message_id - идентификатор сообщения из рассылки

2) датасет №2 - apparel-messages (рассылки, которые были отправлены клиентам):
- bulk_campaign_id - идентификатор рассылки
- client_id - идентификатор клиента
- message_id - идентификатор сообщения
- event - действие клиента с сообщением из рассылки (отправлено, открыл, перешел по ссылке и т. п.)
- channel - канал рассылки
- date - дата действия клиента
- created_at - дата рассылки (время полностью)

3) датасет №3 - target (вероятность покупки)
- client_id - идентификатор клиента
- target - клиент совершил покупку в целевом периоде (1 или 0)

4) датасет №4 - full_campaign_daily_event (агрегация общей базы рассылок по дням и типам событий)
- date - дата
- bulk_campaign_id - идентификатор рассылки
- count_event - общее количество каждого события event (сколько было кликов, переходов по кампании в разрезе дней)
- nunique_event - количество уникальных client_id в каждом событии

5) датасет №5 - full_campaign_daily_event_channel (агрегация по дням с учетом событий и каналов рассылки)
- date - дата
- bulk_campaign_id - идентификатор рассылки
- count_event_channel - общее количество каждого события по каналам (сколько было кликов, переходов по кампании в разрезе каналов - почта или пуш на мобильный)
- nunique_event_channel - количество уникальных client_id по событиям и каналам

3. Выводы.
- (1) Лучшей моделью для прогнозирования оказалась модель на основе catboost;
- (2) качество модели по метрике ROC на тестовой выборке - 79%.
Качество полученной модели невысокое. 

Самыми важными входящими признаками для прогнозирования состояния являются (указаны по мере убывания):
- количество прошедших дней с момента клика клиента;
- эффективность рассылок с точки зрения конверсии;
- среднее время между покупками;
- как давно была последняя покупка;
- количество самих покупок за историю клиента и средний чек клиента.

Критичные значения вышеуказанных входящих признаков (или портрет лояльного покупателя, который придет в следующие 90 дней):
- количество прошедших дней с момента клика (перехода по ссылке) клиента - 30-35 дней или менее перешел по ссылке в рекламной рассылке;
- эффективность рассылок с точки зрения конверсии - получил рассылку, средняя эффективность которой выше 0,5%;
- среднее время между покупками - порядка 20-25 дней;
- как давно была последняя покупка - покупал что-либо менее 200 дней назад;
- количество самих покупок за историю клиента и средний чек клиента - покупает чаще чем раз в квартал и имеет средний чек порядка 1200 единиц и менее (чем меньше, тем лучше).

Из этого могут следовать такие дальнейшие практические действия, как:
- не следует оставлять клиента без напоминания, если он уже перешел по ссылке  объявления и время с этого момента уже подходит к 30 дням;
- следует проработать причины низкой эффективности большинства рассылок и попробовать увеличить их конверсию (банально, но тем не менее); 
- следует проработать обратную связь от клиентов, которые:
- (а) покупали ранее (более 200 дней назад) несколько раз, но перестали;
- (б) покупали 4-5 раз за набюдаемые период и после этого более не возвращались;
- возможно они укажут на весомые причины в качестве сервиса и/или продаваемых продуктов, которые ограничивают продажи;
- пересмотреть ассортиментный портфель в сторону увеличения продуктов, которые стоят менее 1200 единиц.